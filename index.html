<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            background: #f5f5f5;
            overflow-x: hidden;
            background-image: url('images/bg1.jpg');
            background-size: contain;
            background-position: center;
            background-attachment: fixed;
        }

        .carousel-container {
            width: 100%;
            max-width: 600px;
            position: relative;
            box-sizing: border-box;
        }

        .carousel-track {
            position: relative;
            display: flex;
            flex-direction: column;
            padding: 50vh 20px;
            box-sizing: border-box;
            align-items: center;
        }

        .carousel-item {
            width: calc(100% - 40px);
            height: 150px;
            background: rgba(237, 236, 238, 0.4); 
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(8px);  
            -webkit-backdrop-filter: blur(8px);  
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-family: Arial, sans-serif;
            font-size: 1.2rem;
            transform-origin: center;
            will-change: transform, opacity;
            box-sizing: border-box;
            border: 1px solid rgba(255, 255, 255, 0.18); 
        }

        @media (max-width: 768px) {
            .carousel-item {
                height: 120px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="center-indicator"></div>
    <div class="carousel-container">
        <div class="carousel-track">
            <div class="carousel-item">Elemento 1: Lorem ipsum dolor sit amet</div>
            <div class="carousel-item">Elemento 2: Consectetur adipiscing elit</div>
            <div class="carousel-item">Elemento 3: Sed do eiusmod tempor</div>
            <div class="carousel-item">Elemento 4: Ut labore et dolore magna</div>
            <div class="carousel-item">Elemento 5: Ut enim ad minim veniam</div>
            <div class="carousel-item">Elemento 6: Quis nostrud exercitation</div>
            <div class="carousel-item">Elemento 7: Lorem ipsum dolor sit amet</div>
            <div class="carousel-item">Elemento 8: Consectetur adipiscing elit</div>
        </div>
    </div>

    <script>
        const container = document.querySelector('.carousel-container');
        const items = document.querySelectorAll('.carousel-item');
        const centerIndicator = document.querySelector('.center-indicator');

        // Posicionar el indicador del centro
        function updateCenterIndicator() {
            centerIndicator.style.top = `${window.innerHeight / 2}px`;
        }
        updateCenterIndicator();

        function easeInOutQuad(x) {
            return x < 0.5 ? 2 * x * x : 1 - Math.pow(-2 * x + 2, 2) / 2;
        }

        function getSmoothScale(distance) {
            // Distancia máxima para el efecto (ajusta este valor según necesites)
            const maxDistance = 600;
            
            // Normalizar la distancia a un valor entre 0 y 1
            const normalizedDistance = Math.min(distance / maxDistance, 1);
            
            // Calcular la escala usando una función suave
            // Esto dará una escala entre 1 (cuando distance = 0) y 0.4 (cuando distance >= maxDistance)
            const scale = 1 - (0.6 * easeInOutQuad(normalizedDistance));
            
            return Math.max(0.4, scale);
        }

        function getSmoothOpacity(distance) {
            const maxDistance = 400;
            const normalizedDistance = Math.min(distance / maxDistance, 1);
            const opacity = 1 - (0.8 * easeInOutQuad(normalizedDistance));
            return Math.max(0.2, opacity);
        }

        function updateScale() {
            const windowCenter = window.innerHeight / 2;
            
            items.forEach(item => {
                const rect = item.getBoundingClientRect();
                const itemCenter = rect.top + (rect.height / 2);
                const distanceFromCenter = Math.abs(windowCenter - itemCenter);
                
                // Aplicar escala y opacidad suaves
                const scale = getSmoothScale(distanceFromCenter);
                const opacity = getSmoothOpacity(distanceFromCenter);

                item.style.transform = `scale(${scale})`;
                item.style.opacity = opacity;
            });
        }

        // Centrar el primer elemento al cargar
        function centerFirstElement() {
            if (items.length > 0) {
                const firstItem = items[0];
                const rect = firstItem.getBoundingClientRect();
                const offset = rect.top + window.scrollY - (window.innerHeight - rect.height) / 2;
                window.scrollTo({
                    top: offset,
                    behavior: 'instant'
                });
            }
        }

        // Event Listeners
        window.addEventListener('scroll', () => {
            window.requestAnimationFrame(updateScale);
        }, { passive: true });

        window.addEventListener('resize', () => {
            updateCenterIndicator();
            updateScale();
        });

        // Inicialización
        document.addEventListener('DOMContentLoaded', () => {
            centerFirstElement();
            updateScale();
        });

        // Observador de intersección para mejor rendimiento
        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        updateScale();
                    }
                });
            },
            {
                root: null,
                threshold: [0, 0.5, 1]
            }
        );

        items.forEach(item => observer.observe(item));

        // Ejecutar centerFirstElement después de un pequeño delay
        setTimeout(centerFirstElement, 100);
    </script>
</body>
</html>